<!DOCTYPE html>





<html lang="en">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=2">
<meta name="theme-color" content="#222">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png?v=7.3.0">
  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png?v=7.3.0">
  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png?v=7.3.0">
  <link rel="mask-icon" href="/images/logo.svg?v=7.3.0" color="#222">

<link rel="stylesheet" href="/css/main.css?v=7.3.0">


<link rel="stylesheet" href="/lib/font-awesome/css/font-awesome.min.css?v=4.7.0">


<script id="hexo-configurations">
  var NexT = window.NexT || {};
  var CONFIG = {
    root: '/',
    scheme: 'Pisces',
    version: '7.3.0',
    exturl: false,
    sidebar: {"position":"left","display":"post","offset":12,"onmobile":false},
    copycode: {"enable":false,"show_result":false,"style":null},
    back2top: {"enable":true,"sidebar":false,"scrollpercent":false},
    bookmark: {"enable":false,"color":"#222","save":"auto"},
    fancybox: false,
    mediumzoom: false,
    lazyload: false,
    pangu: false,
    algolia: {
      appID: '',
      apiKey: '',
      indexName: '',
      hits: {"per_page":10},
      labels: {"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}
    },
    localsearch: {"enable":false,"trigger":"auto","top_n_per_article":1,"unescape":false,"preload":false},
    path: '',
    motion: {"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}},
    translation: {
      copy_button: 'Copy',
      copy_success: 'Copied',
      copy_failure: 'Copy failed'
    }
  };
</script>

  <meta name="description" content="Node.js1.node.js简介1.1. node.js是什么 node.js  is a javascript runtime built on chrome’s V8 javascript engine node.js 不是一门语言 node.js 不是库，不是框架 node.js是一个JavaScript运行时环境 简单点来讲就是node.js可以解析和执行javascript代码 以前">
<meta name="keywords" content="node">
<meta property="og:type" content="article">
<meta property="og:title" content="nodejs">
<meta property="og:url" content="http://yoursite.com/2019/08/22/nodejs/index.html">
<meta property="og:site_name" content="my-blog">
<meta property="og:description" content="Node.js1.node.js简介1.1. node.js是什么 node.js  is a javascript runtime built on chrome’s V8 javascript engine node.js 不是一门语言 node.js 不是库，不是框架 node.js是一个JavaScript运行时环境 简单点来讲就是node.js可以解析和执行javascript代码 以前">
<meta property="og:locale" content="en">
<meta property="og:updated_time" content="2019-08-22T04:53:04.990Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="nodejs">
<meta name="twitter:description" content="Node.js1.node.js简介1.1. node.js是什么 node.js  is a javascript runtime built on chrome’s V8 javascript engine node.js 不是一门语言 node.js 不是库，不是框架 node.js是一个JavaScript运行时环境 简单点来讲就是node.js可以解析和执行javascript代码 以前">
  <link rel="canonical" href="http://yoursite.com/2019/08/22/nodejs/">


<script id="page-configurations">
  // https://hexo.io/docs/variables.html
  CONFIG.page = {
    sidebar: "",
    isHome: false,
    isPost: true,
    isPage: false,
    isArchive: false
  };
</script>

  <title>nodejs | my-blog</title>
  <meta name="generator" content="Hexo 3.9.0">
  








  <noscript>
  <style>
  .use-motion .motion-element,
  .use-motion .brand,
  .use-motion .menu-item,
  .sidebar-inner,
  .use-motion .post-block,
  .use-motion .pagination,
  .use-motion .comments,
  .use-motion .post-header,
  .use-motion .post-body,
  .use-motion .collection-title { opacity: initial; }

  .use-motion .logo,
  .use-motion .site-title,
  .use-motion .site-subtitle {
    opacity: initial;
    top: initial;
  }

  .use-motion .logo-line-before i { left: initial; }
  .use-motion .logo-line-after i { right: initial; }
  </style>
</noscript>

</head>

<body itemscope itemtype="http://schema.org/WebPage" lang="en">
  <div class="container use-motion">
    <div class="headband"></div>

    <header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-wrapper">
  <div class="site-meta">

    <div class="custom-logo-site-title">
      <a href="/" class="brand" rel="start">
        <span class="logo-line-before"><i></i></span>
        <span class="site-title">my-blog</span>
        <span class="logo-line-after"><i></i></span>
      </a>
    </div>
  </div>

  <div class="site-nav-toggle">
    <button aria-label="Toggle navigation bar">
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
    </button>
  </div>
</div>


<nav class="site-nav">
  
  <ul id="menu" class="menu">
      
      
      
        
        <li class="menu-item menu-item-home">
      
    

    <a href="/" rel="section"><i class="menu-item-icon fa fa-fw fa-home"></i> <br>Home</a>

  </li>
      
      
      
        
        <li class="menu-item menu-item-archives">
      
    

    <a href="/archives/" rel="section"><i class="menu-item-icon fa fa-fw fa-archive"></i> <br>Archives</a>

  </li>
  </ul>

</nav>
</div>
    </header>

    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
            

          <div id="content" class="content page-post-detail">
            

  <div id="posts" class="posts-expand">
    

  <article class="post" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2019/08/22/nodejs/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="elaine">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="my-blog">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">nodejs

          
        </h1>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>

              
                
              

              <time title="Created: 2019-08-22 12:43:36 / Modified: 12:53:04" itemprop="dateCreated datePublished" datetime="2019-08-22T12:43:36+08:00">2019-08-22</time>
            </span>
          
            

            
          

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
        <h1 id="Node-js"><a href="#Node-js" class="headerlink" title="Node.js"></a>Node.js</h1><h2 id="1-node-js简介"><a href="#1-node-js简介" class="headerlink" title="1.node.js简介"></a>1.node.js简介</h2><h3 id="1-1-node-js是什么"><a href="#1-1-node-js是什么" class="headerlink" title="1.1. node.js是什么"></a>1.1. node.js是什么</h3><ul>
<li>node.js  is a javascript runtime built on chrome’s V8 javascript engine<ul>
<li>node.js 不是一门语言</li>
<li>node.js 不是库，不是框架</li>
<li>node.js是一个JavaScript运行时环境</li>
<li>简单点来讲就是node.js可以解析和执行javascript代码</li>
<li>以前只有浏览器可以解析执行javascript代码</li>
<li>也就是说现在的JavaScript可以完全脱离浏览器来运行</li>
</ul>
</li>
<li>浏览器中的JavaScript<ul>
<li>ECMAScript<ul>
<li>基本的语法</li>
<li>if</li>
<li>var</li>
<li>function</li>
<li>Object</li>
<li>Array</li>
</ul>
</li>
<li>BOM</li>
<li>DOM</li>
</ul>
</li>
<li>node.js中的JavaScript<ul>
<li>没有BOM,DOM</li>
<li>ECMASCRIPT</li>
<li>在node这个javascript执行环境中为JavaScript提供了一些服务器级别的操作API<ul>
<li>例如文件读写</li>
<li>网络服务的构建</li>
<li>网络通信</li>
<li>HTTP服务器</li>
<li>等处理…</li>
</ul>
</li>
</ul>
</li>
<li>构建与chrome的V8引擎之上<ul>
<li>代码只是具有特定格式的字符串而已</li>
<li>引擎可以认识它，引擎可以帮你去解析和执行</li>
<li>google Chrome的v8引擎是目前公认的解析执行javascript代码最快的</li>
<li>node.js 的作者把google中的v8引擎移植了出来，开发了一个独立的JavaScript运行时环境</li>
</ul>
</li>
<li>node.js uses an event-driven,non-blocking i/o model that makes it lightweight and efficient.<ul>
<li>event-driven 事件驱动</li>
<li>non-blocking I/O model 非阻塞IO模型（异步）</li>
<li>lightweight and efficient 轻量和高效</li>
</ul>
</li>
<li>node.js package ecosystem.npm is the largest ecosystem of open source libraries in the world<ul>
<li>npm是世界上最大的开源生态系统</li>
<li>绝大多数javascript相关的包都存放在了npm上，这样做的目的是为了让开发人员更方便的去下载使用</li>
<li>npm install jquery</li>
</ul>
</li>
</ul>
<h3 id="1-2-Node-js能做什么"><a href="#1-2-Node-js能做什么" class="headerlink" title="1.2. Node.js能做什么"></a>1.2. Node.js能做什么</h3><ul>
<li>web服务器后台</li>
<li>命令行工具<ul>
<li>npm (node)</li>
<li>git(c语言开发)</li>
<li>hexo(node)</li>
</ul>
</li>
<li>游戏服务器</li>
<li>接口服务器</li>
<li>对于前端开发工程师来讲，接触node最多的是它的命令行工具<ul>
<li>webpack</li>
<li>gulp</li>
<li>npm</li>
</ul>
</li>
</ul>
<h3 id="1-3-预备知识"><a href="#1-3-预备知识" class="headerlink" title="1.3. 预备知识"></a>1.3. 预备知识</h3><ul>
<li>html</li>
<li>css</li>
<li>javascript</li>
<li>简单的命令行操作<ul>
<li>cd</li>
<li>dir</li>
<li>ls</li>
<li>mkdir</li>
<li>rm</li>
</ul>
</li>
<li>具有服务器开发经验更佳</li>
</ul>
<h3 id="1-4-一些资源"><a href="#1-4-一些资源" class="headerlink" title="1.4. 一些资源"></a>1.4. 一些资源</h3><ul>
<li><p>《深入浅出node.js》</p>
<ul>
<li>朴灵</li>
<li>偏理论，几乎没有任何实战型内容，偏底层</li>
<li>理解原理底层有帮助</li>
</ul>
</li>
<li><p>《node.js权威指南》</p>
<ul>
<li><p>API讲解</p>
</li>
<li><p>没有业务，也没有实战</p>
</li>
<li><p>[Node入门][<a href="http://www.nodebeginner.org/index-zh-cn.html]" target="_blank" rel="noopener">http://www.nodebeginner.org/index-zh-cn.html]</a></p>
</li>
<li><p>[官方API文档][<a href="https://nodejs.org/dist/latest-v6.x/docs/api/]" target="_blank" rel="noopener">https://nodejs.org/dist/latest-v6.x/docs/api/]</a></p>
</li>
<li><p>[cnode社区][<a href="http://codejs.org]" target="_blank" rel="noopener">http://codejs.org]</a></p>
</li>
<li><p>[cnode新手入门][<a href="http://cnodejs.org/getstart]" target="_blank" rel="noopener">http://cnodejs.org/getstart]</a></p>
</li>
</ul>
</li>
</ul>
<h3 id="1-5-这门课程能学到什么"><a href="#1-5-这门课程能学到什么" class="headerlink" title="1.5. 这门课程能学到什么"></a>1.5. 这门课程能学到什么</h3><ul>
<li>B/S编程模型<ul>
<li>browser-server</li>
<li>back-end</li>
<li>任何服务端技术这种BS编程模型都是一样，和语言无关</li>
<li>Node只是作为我们学习BS编程模型的一个工具而已</li>
</ul>
</li>
<li>模块化编程<ul>
<li>requireJS</li>
<li>SeaJS</li>
<li><code>import(&#39;&#39;)</code></li>
<li>以前认知的javascript智能通过<code>script</code>标签来加载</li>
<li>在node中可以像<code>@import</code>一样来引用加载javascript脚本文件</li>
<li>Node常用API</li>
<li>异步编程<ul>
<li>回调函数</li>
<li>promise</li>
<li>async</li>
<li>generator</li>
</ul>
</li>
</ul>
</li>
<li>express web开发框架</li>
<li>ECMAScript6</li>
</ul>
<h2 id="2-起步"><a href="#2-起步" class="headerlink" title="2.起步"></a>2.起步</h2><h3 id="2-1-node环境安装"><a href="#2-1-node环境安装" class="headerlink" title="2.1 node环境安装"></a>2.1 node环境安装</h3><ul>
<li>查看当前node环境的版本号<ul>
<li>打开命令行，输入<code>node --version</code></li>
<li>或者输入<code>node -v</code></li>
</ul>
</li>
<li>下载：<a href="https://nodejs.org/en/download/" target="_blank" rel="noopener">https://nodejs.org/en/download/</a></li>
<li>安装<ul>
<li>对于已经装过的，重新安装就会升级</li>
</ul>
</li>
</ul>
<h3 id="2-2-hello-world"><a href="#2-2-hello-world" class="headerlink" title="2.2. hello world"></a>2.2. hello world</h3><ol>
<li>创建编写javascript的脚本文件</li>
<li>打开终端，定位到脚本文件所属目录</li>
<li>输入<code>node</code>文件名执行对应的文件<ol>
<li>注意：文件名不要使用node.js来命名</li>
</ol>
</li>
<li>解析执行javascript</li>
<li>读写文件</li>
</ol>
<ul>
<li><p>浏览器中的javascript是没有文件操作能力的，但是node中的javascript具有文件操作的能力</p>
</li>
<li><p>fs是file-system的简写,就是文件系统的意思</p>
</li>
<li><p>在node中如果想要进行文件操作,就必须引入fs这个核心模块</p>
</li>
<li><p>在fs这个核心模块中,就提供了所有的文件操作相关的API</p>
</li>
<li><p>例如:<code>fs.readFile</code>就是用来读取文件的</p>
<ul>
<li><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//1,使用require方法加载fs核心模块</span></span><br><span class="line"><span class="keyword">var</span> fs=<span class="built_in">require</span>(<span class="string">'fs'</span>)</span><br><span class="line"><span class="comment">//2.读取文件</span></span><br><span class="line"><span class="comment">//	第一个参数就是要读取的文件路径</span></span><br><span class="line"><span class="comment">//	第二个参数是一个回调函数</span></span><br><span class="line"><span class="comment">//	成功</span></span><br><span class="line"><span class="comment">//		error null</span></span><br><span class="line"><span class="comment">//		data 数据</span></span><br><span class="line"><span class="comment">//	失败</span></span><br><span class="line"><span class="comment">//		error 错误对象</span></span><br><span class="line"><span class="comment">//		data null</span></span><br><span class="line">fs.readFile(<span class="string">'./hello.txt'</span>,<span class="string">'utf8'</span>,<span class="function"><span class="keyword">function</span>(<span class="params">error,data</span>)</span>&#123;</span><br><span class="line"><span class="comment">//    console.log(data.toString())</span></span><br><span class="line">    <span class="keyword">if</span>(error)&#123;</span><br><span class="line">        <span class="built_in">console</span>.log(<span class="string">'文件读取失败了'</span>)</span><br><span class="line">    &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">        <span class="built_in">console</span>.log(data.toString())</span><br><span class="line">    &#125;</span><br><span class="line">&#125;)</span><br><span class="line"><span class="comment">//文件中存储的其实都是二进制数据0 1</span></span><br><span class="line"><span class="comment">//这里是二进制转为16进制了</span></span><br><span class="line"><span class="comment">//所以我们可以通过toString方法转换为我们认识的数据</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>fs.witeFile()读文件</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//第一个参数:文件路径</span></span><br><span class="line"><span class="comment">//第二个参数:文件内容</span></span><br><span class="line"><span class="comment">//第三个参数:回调函数</span></span><br><span class="line"><span class="keyword">var</span> fs = <span class="built_in">require</span>(<span class="string">'fs'</span>)</span><br><span class="line">fs.writeFile(<span class="string">'./sayhello.md'</span>,<span class="string">'hello I am nodejs'</span>,<span class="function"><span class="keyword">function</span>(<span class="params">error</span>)</span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(error) <span class="comment">//可以判断是否写成功</span></span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">"写入成功"</span>)</span><br><span class="line">    <span class="keyword">if</span>(error)&#123;</span><br><span class="line">        <span class="built_in">console</span>.log(<span class="string">"写入失败"</span>)</span><br><span class="line">    &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">        <span class="built_in">console</span>.log(<span class="string">'写入成功'</span>)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;)</span><br><span class="line"><span class="comment">//window下中文件名不能有特殊的字符</span></span><br></pre></td></tr></table></figure>

</li>
</ul>
</li>
</ul>
<h2 id="3-node中的Javascript"><a href="#3-node中的Javascript" class="headerlink" title="3. node中的Javascript"></a>3. node中的Javascript</h2><h3 id="3-1使用node创建服务器"><a href="#3-1使用node创建服务器" class="headerlink" title="3.1使用node创建服务器"></a>3.1使用node创建服务器</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//1.加载http核心模块</span></span><br><span class="line"><span class="keyword">var</span> http = <span class="built_in">require</span>(<span class="string">"http"</span>)</span><br><span class="line"><span class="comment">//2.使用HTTP.creatServer()方法创建一个Web服务器</span></span><br><span class="line"><span class="keyword">var</span> server = http.createServer()</span><br><span class="line"><span class="comment">//3.服务器要干嘛?</span></span><br><span class="line"><span class="comment">// 	提供服务:对数据的服务</span></span><br><span class="line"><span class="comment">//	发请求</span></span><br><span class="line"><span class="comment">//	接收请求</span></span><br><span class="line"><span class="comment">//	处理请求</span></span><br><span class="line"><span class="comment">//	发送响应</span></span><br><span class="line"><span class="comment">//	注册request请求事件,就会自动触发服务器的request请求事件,然后执行第二个参数,回调处理</span></span><br><span class="line"><span class="comment">//request请求事件处理函数,需要接收两个参数</span></span><br><span class="line"><span class="comment">//	Request 请求对象</span></span><br><span class="line"><span class="comment">//		请求对象可以用来获取客户端的一些请求信息,例如请求路径</span></span><br><span class="line"><span class="comment">//	Response 响应对象</span></span><br><span class="line"><span class="comment">//		响应对象可以用来给客户端发送响应消息</span></span><br><span class="line">server.on(<span class="string">'request'</span>,<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">	<span class="built_in">console</span>.log(<span class="string">"收到客户端的请求了"</span>)</span><br><span class="line">&#125;)</span><br><span class="line"><span class="comment">//response对象有一个方法,write 可以用来给客户端发送响应数据</span></span><br><span class="line"><span class="comment">//write可以使用多次,但是最后一定要使用end来结束响应,否则客户端会一直等待</span></span><br><span class="line">server.on(<span class="string">'request'</span>,<span class="function"><span class="keyword">function</span>(<span class="params">request.response</span>)</span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">"收到客户端请求了,请求路径是"</span>+request.url)</span><br><span class="line">    response.write(<span class="string">"hello"</span>)</span><br><span class="line">    response.write(<span class="string">"node.js"</span>)</span><br><span class="line">    response.end()</span><br><span class="line">   <span class="comment">//上面的方式比较繁琐,推荐使用更简单的方式,end的同时发送响应数据</span></span><br><span class="line">    response.end(<span class="string">"hello worle"</span>)</span><br><span class="line">&#125;)</span><br><span class="line"><span class="comment">//</span></span><br><span class="line"><span class="comment">//response对象有一个方法:write 可以用来给客户端发送响应数据</span></span><br><span class="line"><span class="comment">//write 可以使用多次,但是最后一定要使用end来结束响应,否则客户端会一直</span></span><br><span class="line"><span class="comment">//4.绑定端口号,启动服务器</span></span><br><span class="line">server.listen(<span class="number">3000</span>,<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">"服务器启动成功了,可以进行访问"</span>)</span><br><span class="line">&#125;)</span><br><span class="line"><span class="comment">//ctrl+c关闭服务</span></span><br><span class="line"><span class="comment">//响应内容只能是二进制数据或者字符串</span></span><br></pre></td></tr></table></figure>

<h3 id="3-2核心模块"><a href="#3-2核心模块" class="headerlink" title="3.2核心模块"></a>3.2核心模块</h3><ul>
<li>node为javascript提供了很多服务器级别的API,这些API绝大多数都被包装到了一个具体的核心模块中了,例如文件操作的<code>fs</code>核心模块,<code>http</code>服务构建的<code>http</code>模块,<code>path</code>路径模块,<code>os</code>操作系统模块</li>
<li>核心模块:node提供的一个个的具名模块,它们都有自己特殊的名称标识<ul>
<li>fs 文件操作模块</li>
<li>http 网络服务模块</li>
<li>os 操作系统信息模块</li>
<li>path 路径处理模块</li>
</ul>
</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> os = <span class="built_in">require</span>(<span class="string">'os'</span>)</span><br><span class="line"><span class="comment">//获取当前机器的CPU信息</span></span><br><span class="line"><span class="built_in">console</span>.log(os.cpus())</span><br><span class="line"><span class="comment">//获取当前的内存</span></span><br><span class="line"><span class="built_in">console</span>.log(os.totalmem())</span><br></pre></td></tr></table></figure>

<p>返回结果:</p>
<figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br></pre></td><td class="code"><pre><span class="line">[ &#123; model: 'Intel(R) Core(TM) i7-6700K CPU @ 4.00GHz',</span><br><span class="line"></span><br><span class="line">​    speed: 4008,</span><br><span class="line"></span><br><span class="line">​    times:</span><br><span class="line"></span><br><span class="line">​     &#123; user: 20325385,</span><br><span class="line"></span><br><span class="line">​       nice: 0,</span><br><span class="line"></span><br><span class="line">​       sys: 11606302,</span><br><span class="line"></span><br><span class="line">​       idle: 253530126,</span><br><span class="line"></span><br><span class="line">​       irq: 604784 &#125; &#125;,</span><br><span class="line"></span><br><span class="line">  &#123; model: 'Intel(R) Core(TM) i7-6700K CPU @ 4.00GHz',</span><br><span class="line"></span><br><span class="line">​    speed: 4008,</span><br><span class="line"></span><br><span class="line">​    times:</span><br><span class="line"></span><br><span class="line">​     &#123; user: 4581421,</span><br><span class="line"></span><br><span class="line">​       nice: 0,</span><br><span class="line"></span><br><span class="line">​       sys: 1266322,</span><br><span class="line"></span><br><span class="line">​       idle: 279613852,</span><br><span class="line"></span><br><span class="line">​       irq: 7347 &#125; &#125;,</span><br><span class="line"></span><br><span class="line">  &#123; model: 'Intel(R) Core(TM) i7-6700K CPU @ 4.00GHz',</span><br><span class="line"></span><br><span class="line">​    speed: 4008,</span><br><span class="line"></span><br><span class="line">​    times:</span><br><span class="line"></span><br><span class="line">​     &#123; user: 22679612,</span><br><span class="line"></span><br><span class="line">​       nice: 0,</span><br><span class="line"></span><br><span class="line">​       sys: 9749500,</span><br><span class="line"></span><br><span class="line">​       idle: 253032358,</span><br><span class="line"></span><br><span class="line">​       irq: 43259 &#125; &#125;,</span><br><span class="line"></span><br><span class="line">  &#123; model: 'Intel(R) Core(TM) i7-6700K CPU @ 4.00GHz',</span><br><span class="line"></span><br><span class="line">​    speed: 4008,</span><br><span class="line"></span><br><span class="line">​    times:</span><br><span class="line"></span><br><span class="line">​     &#123; user: 2111988,</span><br><span class="line"></span><br><span class="line">​       nice: 0,</span><br><span class="line"></span><br><span class="line">​       sys: 1178322,</span><br><span class="line"></span><br><span class="line">​       idle: 282171036,</span><br><span class="line"></span><br><span class="line">​       irq: 4383 &#125; &#125;,</span><br><span class="line"></span><br><span class="line">  &#123; model: 'Intel(R) Core(TM) i7-6700K CPU @ 4.00GHz',</span><br><span class="line"></span><br><span class="line">​    speed: 4008,</span><br><span class="line"></span><br><span class="line">​    times:</span><br><span class="line"></span><br><span class="line">​     &#123; user: 19041716,</span><br><span class="line"></span><br><span class="line">​       nice: 0,</span><br><span class="line"></span><br><span class="line">​       sys: 8828907,</span><br><span class="line"></span><br><span class="line">​       idle: 257590598,</span><br><span class="line"></span><br><span class="line">​       irq: 56160 &#125; &#125;,</span><br><span class="line"></span><br><span class="line">  &#123; model: 'Intel(R) Core(TM) i7-6700K CPU @ 4.00GHz',</span><br><span class="line"></span><br><span class="line">​    speed: 4008,</span><br><span class="line"></span><br><span class="line">​    times:</span><br><span class="line"></span><br><span class="line">​     &#123; user: 2134904,</span><br><span class="line"></span><br><span class="line">​       nice: 0,</span><br><span class="line"></span><br><span class="line">​       sys: 1117762,</span><br><span class="line"></span><br><span class="line">​       idle: 282208429,</span><br><span class="line"></span><br><span class="line">​       irq: 7846 &#125; &#125;,</span><br><span class="line"></span><br><span class="line">  &#123; model: 'Intel(R) Core(TM) i7-6700K CPU @ 4.00GHz',</span><br><span class="line"></span><br><span class="line">​    speed: 4008,</span><br><span class="line"></span><br><span class="line">​    times:</span><br><span class="line"></span><br><span class="line">​     &#123; user: 27158260,</span><br><span class="line"></span><br><span class="line">​       nice: 0,</span><br><span class="line"></span><br><span class="line">​       sys: 10449134,</span><br><span class="line"></span><br><span class="line">​       idle: 247853577,</span><br><span class="line"></span><br><span class="line">​       irq: 42713 &#125; &#125;,</span><br><span class="line"></span><br><span class="line">  &#123; model: 'Intel(R) Core(TM) i7-6700K CPU @ 4.00GHz',</span><br><span class="line"></span><br><span class="line">​    speed: 4008,</span><br><span class="line"></span><br><span class="line">​    times:</span><br><span class="line"></span><br><span class="line">​     &#123; user: 2528760,</span><br><span class="line"></span><br><span class="line">​       nice: 0,</span><br><span class="line"></span><br><span class="line">​       sys: 1278755,</span><br><span class="line"></span><br><span class="line">​       idle: 281653331,</span><br><span class="line"></span><br><span class="line">​       irq: 6208 &#125; &#125; ]</span><br><span class="line"></span><br><span class="line"><span class="number">17090854912</span></span><br></pre></td></tr></table></figure>

<h3 id="3-3-fs核心模块"><a href="#3-3-fs核心模块" class="headerlink" title="3.3 fs核心模块"></a>3.3 fs核心模块</h3><h4 id="3-3-1读取文件"><a href="#3-3-1读取文件" class="headerlink" title="3.3.1读取文件"></a>3.3.1读取文件</h4><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> fs = <span class="built_in">require</span>(<span class="string">'fs'</span>)</span><br><span class="line"><span class="built_in">console</span>.log(<span class="string">'1.开始读取文件'</span>)</span><br><span class="line">fs.readFileSync(<span class="string">'\\user.md'</span>,<span class="string">'utf-8'</span>)</span><br><span class="line"><span class="built_in">console</span>.log(<span class="string">'2.同步读取完成'</span>)</span><br><span class="line"><span class="comment">//异步读取</span></span><br><span class="line">fs.readFile(<span class="string">'\\user.md'</span>,<span class="function"><span class="keyword">function</span>(<span class="params">err,data</span>)</span>&#123;</span><br><span class="line">    <span class="keyword">if</span>(err)<span class="keyword">throw</span> err<span class="comment">//throw语句一旦执行就不会往下执行</span></span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">'4.异步读取'</span>)</span><br><span class="line">    <span class="built_in">console</span>.log(data.toString())</span><br><span class="line">&#125;)</span><br><span class="line"><span class="built_in">console</span>.log(<span class="string">'3.操作结束'</span>)</span><br></pre></td></tr></table></figure>

<h4 id="3-3-2打开文件"><a href="#3-3-2打开文件" class="headerlink" title="3.3.2打开文件"></a>3.3.2打开文件</h4><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> fs = <span class="built_in">require</span>(<span class="string">'fs'</span>)</span><br><span class="line">fs.open(<span class="string">'./readme.md'</span>,<span class="string">'w+'</span>,<span class="function"><span class="keyword">function</span>(<span class="params">err,data</span>)</span>&#123;</span><br><span class="line">    <span class="keyword">if</span>(err)<span class="keyword">throw</span> err</span><br><span class="line">    <span class="built_in">console</span>.log(data,type <span class="keyword">of</span> data)</span><br><span class="line">    	fs.close(data,<span class="function"><span class="keyword">function</span>(<span class="params">err2,data2</span>)</span>&#123;</span><br><span class="line">            <span class="keyword">if</span>(err)<span class="keyword">throw</span> err</span><br><span class="line">            <span class="built_in">console</span>.log(<span class="string">'完成文件关闭操作'</span>)</span><br><span class="line">            <span class="comment">//关闭文件语句一定要再打开文件语句里执行,打开文件后一定要记得关闭文件</span></span><br><span class="line">            <span class="comment">// fs.open(path,flag,fun)  文件打开参数如下表：</span></span><br><span class="line"><span class="comment">// Flag	描述</span></span><br><span class="line"><span class="comment">// r	以读取模式打开文件。如果文件不存在抛出异常。</span></span><br><span class="line"><span class="comment">// r+	以读写模式打开文件。如果文件不存在抛出异常。</span></span><br><span class="line"><span class="comment">// rs	以同步的方式读取文件。</span></span><br><span class="line"><span class="comment">// rs+	以同步的方式读取和写入文件。</span></span><br><span class="line"><span class="comment">// w	以写入模式打开文件，如果文件不存在则创建。</span></span><br><span class="line"><span class="comment">// wx	类似 'w'，但是如果文件路径存在，则文件写入失败。</span></span><br><span class="line"><span class="comment">// w+	以读写模式打开文件，如果文件不存在则创建。</span></span><br><span class="line"><span class="comment">// wx+	类似 'w+'， 但是如果文件路径存在，则文件读写失败。</span></span><br><span class="line"><span class="comment">// a	以追加模式打开文件，如果文件不存在则创建。</span></span><br><span class="line"><span class="comment">// ax	类似 'a'， 但是如果文件路径存在，则文件追加失败。</span></span><br><span class="line"><span class="comment">// a+	以读取追加模式打开文件，如果文件不存在则创建。</span></span><br><span class="line"><span class="comment">// ax+	类似 'a+'， 但是如果文件路径存在，则文件读取追加失败。</span></span><br><span class="line"></span><br><span class="line">        &#125;)</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>

<h4 id="3-3-3删除文件"><a href="#3-3-3删除文件" class="headerlink" title="3.3.3删除文件"></a>3.3.3删除文件</h4><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> fs = <span class="built_in">require</span>(<span class="string">'js'</span>)</span><br><span class="line"><span class="keyword">var</span> path = <span class="built_in">require</span>(<span class="string">'path'</span>)</span><br><span class="line"><span class="keyword">var</span> addr = path.join(__dirname,<span class="string">'package'</span>)<span class="comment">//__dirname返回当前的绝对路径</span></span><br><span class="line"><span class="keyword">var</span> ishave = fs.existsSync(addr)&#123;</span><br><span class="line">    <span class="keyword">if</span>(ishave)&#123;</span><br><span class="line">        fs.unlink(addr,funciton(err)&#123; </span><br><span class="line">                  <span class="keyword">if</span>(err) <span class="keyword">throw</span> err</span><br><span class="line">        <span class="built_in">console</span>.log(<span class="string">'删除成功'</span>)</span><br><span class="line">                  &#125;)</span><br><span class="line">    &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">        <span class="built_in">console</span>.log(<span class="string">'文件不存在'</span>)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="3-3-4写文件"><a href="#3-3-4写文件" class="headerlink" title="3.3.4写文件"></a>3.3.4写文件</h4><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> fs = <span class="built_in">require</span>(<span class="string">'fs'</span>)</span><br><span class="line"><span class="keyword">var</span> path = <span class="built_in">require</span>(<span class="string">'path'</span>)</span><br><span class="line"><span class="keyword">var</span> addr = path.join(__dirname,<span class="string">'user.md'</span>)</span><br><span class="line"><span class="comment">//文件写入时,如果文件不存在,会自动创建</span></span><br><span class="line"><span class="comment">//写入操作会替换文件原有的内容</span></span><br><span class="line"><span class="keyword">var</span> str = <span class="string">'I really want to be with caizhaoyao, now'</span></span><br><span class="line">fs.writeFile(addr,str,<span class="string">'utf8'</span>,<span class="function"><span class="keyword">function</span>(<span class="params">err,data</span>)</span>&#123;</span><br><span class="line">    <span class="keyword">if</span>(err)<span class="keyword">throw</span> err</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">'写入成功'</span>)</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>

<h4 id="3-3-5追加文件"><a href="#3-3-5追加文件" class="headerlink" title="3.3.5追加文件"></a>3.3.5追加文件</h4><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> fs = <span class="built_in">require</span>(<span class="string">'fs'</span>)</span><br><span class="line"><span class="keyword">var</span> path = <span class="built_in">require</span>(<span class="string">'path'</span>)</span><br><span class="line"><span class="keyword">var</span> addr = path.join(__dir,<span class="string">'user.md'</span>)</span><br><span class="line"><span class="keyword">var</span> str = <span class="string">"hello"</span> + <span class="keyword">new</span> <span class="built_in">Date</span>()+<span class="string">'\n\r'</span></span><br><span class="line">fs.appendFile(addr,str,<span class="string">'utf-8'</span>,<span class="function"><span class="keyword">function</span>(<span class="params">err,data</span>)</span>&#123;</span><br><span class="line">    <span class="keyword">if</span>(err)<span class="keyword">throw</span> err</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">'文件追加成功'</span>)</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>

<h4 id="3-3-6遍历文件"><a href="#3-3-6遍历文件" class="headerlink" title="3.3.6遍历文件"></a>3.3.6遍历文件</h4><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> fs = <span class="built_in">require</span>(<span class="string">'fs'</span>)</span><br><span class="line"><span class="keyword">var</span> path = <span class="built_in">require</span>(<span class="string">'path'</span>)</span><br><span class="line"><span class="keyword">var</span> addr = path.join(__dirname)</span><br><span class="line">fs.readdir(addr,<span class="function"><span class="keyword">function</span>(<span class="params">err,data</span>)</span>&#123;</span><br><span class="line">    <span class="keyword">if</span>(err)<span class="keyword">throw</span> err</span><br><span class="line">    <span class="built_in">console</span>.log(data,data <span class="keyword">instanceof</span> <span class="built_in">Array</span>)<span class="comment">//true</span></span><br><span class="line">    <span class="keyword">for</span>(item <span class="keyword">in</span> data)&#123;</span><br><span class="line">        <span class="keyword">var</span> newaddr = path.join(addr,item)</span><br><span class="line">        <span class="built_in">console</span>.log(item,data[item])</span><br><span class="line">    &#125;</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>

<h3 id="3-4-path核心模块"><a href="#3-4-path核心模块" class="headerlink" title="3.4 path核心模块"></a>3.4 path核心模块</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;</span> path.dirname('c:/a/b/c/index.js')</span><br><span class="line">'c:/a/b/c'</span><br><span class="line"><span class="meta">&gt;</span> path.extname('c:a/b/c/indix.js')</span><br><span class="line">'.js'</span><br><span class="line"><span class="meta">&gt;</span> path.isAbsolute('index.js')</span><br><span class="line">false</span><br><span class="line"><span class="meta">&gt;</span> path.isAbsolute('/c/index.html')</span><br><span class="line">true</span><br><span class="line"><span class="meta">&gt;</span> path.parse('c:/a/b/c.js')</span><br><span class="line">&#123; root: 'c:/', dir: 'c:/a/b', base: 'c.js', ext: '.js', name: 'c' &#125;</span><br><span class="line"><span class="meta">&gt;</span> path.parse(__dirname)</span><br><span class="line">ReferenceError: __dirname is not defined</span><br><span class="line"><span class="meta">&gt;</span> path.join('c:/a','b')</span><br><span class="line">'c:\\a\\b'</span><br><span class="line"><span class="meta">&gt;</span> path.basename('c:/a/b/c/d.html')</span><br><span class="line">'d.html'</span><br></pre></td></tr></table></figure>

<h3 id="3-5用户自定义模块"><a href="#3-5用户自定义模块" class="headerlink" title="3.5用户自定义模块"></a>3.5用户自定义模块</h3><ul>
<li>require    <ul>
<li>是一个方法,它的作用是用来加载执行模块的</li>
</ul>
</li>
<li>在node 中,模块有三种<ul>
<li>具名的核心模块,例如:fs ,http</li>
<li>用户自己编写的文件模块<ul>
<li>相对路径必须加<code>./</code>  如果省略会被当做核心模块</li>
<li><code>require(&quot;./b.js&quot;)</code>,<code>require(&quot;./b&quot;)</code>,两种写法都可以,推荐后一种</li>
<li>node中没有全局作用域,只有模块作用域,外部不能访问不到内部,内部也不能访问到外部</li>
</ul>
</li>
<li>既然是模块作用域,如何让模块与模块之间通信?</li>
<li>模块作用域可以加载执行多个文件,可以完全避免变量命名冲突</li>
<li>但是在某些情况下,模块与模块之间是需要通信的</li>
<li>在每个模块中都提供给了一个对象:exports</li>
<li>该对象默认是一个空对象<ul>
<li>你要做的就是把需要被外部访问的成员手动挂载到<code>exports</code> 接口对象中<ul>
<li>然后谁来<code>require</code>这个模块,谁就可以得到模块内部的<code>exports</code> 接口对象</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">require</span>(<span class="string">'./b.js'</span>)</span><br><span class="line"><span class="comment">//有require就会加载那个js并执行那个js文件</span></span><br></pre></td></tr></table></figure>

<ul>
<li>加载与导出<ul>
<li>require方法有两个作用<ul>
<li>1.加载文件模块并执行里面的代码</li>
<li>2.拿到被加载文件模块导出的接口对象</li>
</ul>
</li>
<li>在每个文件模块中都提供了一个对象:exports<ul>
<li>exports默认是一个空对象</li>
</ul>
</li>
</ul>
</li>
</ul>
<h2 id="4-web-服务器开发"><a href="#4-web-服务器开发" class="headerlink" title="4. web 服务器开发"></a>4. web 服务器开发</h2><h3 id="4-1ip地址和端口号"><a href="#4-1ip地址和端口号" class="headerlink" title="4.1ip地址和端口号"></a>4.1ip地址和端口号</h3><p>所有联网的程序都需要进行网络通信</p>
<ul>
<li>计算机只有一个物理网卡,而且同一个局域网中,网卡的地址必须是唯一的</li>
<li>网卡是通过唯一的ip地址来定位的</li>
<li>DNS-&gt;ip地址</li>
<li>服务器之所以叫服务器,就是可以24小时不关机的电脑</li>
<li>IP地址用来定位计算机,端口号用来定位具体的应用程序</li>
<li>所有需要联网通信的应用程序都会占用一个端口号,端口号范围从0-65536之间</li>
<li>在计算机中有一些默认端口号,最好不要去使用<ul>
<li>例如http服务的80</li>
</ul>
</li>
<li>我们开发过程中使用一些简单好记的就可以了,例如3000 5000</li>
<li>可以同时开启多个服务,但一定要确保不同服务占用的端口号不一样</li>
<li>说白了,在一台计算机中,同一个端口号同一时间只能被一个程序占用</li>
</ul>
<h3 id="4-2-编码问题"><a href="#4-2-编码问题" class="headerlink" title="4.2 编码问题"></a>4.2 编码问题</h3><ul>
<li>在服务器端默认发送的数据,其实是utf8编码的内容</li>
<li>但是浏览器不知道你是utf8编码的内容</li>
<li>浏览器在不知道服务器响应内容的编码情况下会按照当前系统的默认编码去解析</li>
<li>中文操作系统默认是gbk</li>
<li>意味着utf8编码的内容被浏览器错误用gbk方式去解析了,所以出现乱码</li>
<li>解决方案是正确告诉浏览器我给你发送的内容是什么编码</li>
<li>在http协议中,Content-Type就是告知我给你发送的内容数据是什么类型<ul>
<li>text/plain 就是普通文本</li>
<li>text/html 就是html格式文本</li>
</ul>
</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> http = request(<span class="string">'http'</span>)</span><br><span class="line"><span class="keyword">var</span> server = http.createServer()</span><br><span class="line">server.on(<span class="string">'request'</span>,<span class="function"><span class="keyword">function</span>(<span class="params">req,res</span>)</span>&#123;</span><br><span class="line">    <span class="comment">//res.setHeader('Content-type','text/plain;charset=utf-8')</span></span><br><span class="line">    <span class="comment">//res.end('hello世界')</span></span><br><span class="line">    <span class="keyword">if</span>(url===<span class="string">'/html'</span>)&#123;</span><br><span class="line">        res.end(<span class="string">'&lt;p&gt;hello html&lt;/p&gt;'</span>)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;)</span><br><span class="line">server.listen(<span class="number">3000</span>,<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">'server.listening...'</span>)</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>

<ul>
<li>图片: <code>setHeader(&#39;Content-Type&#39;,&#39;image/jpeg&#39;)</code></li>
<li>url:  统一资源定位符,标识可以随便取,但最好具有一定意义</li>
<li>图片不用指定编码</li>
<li>通过网络发送文件<ul>
<li>发送的并不是文件,本质上来讲发送的是文件的内容</li>
</ul>
</li>
</ul>
<h4 id="代码风格问题"><a href="#代码风格问题" class="headerlink" title="代码风格问题"></a>代码风格问题</h4><ul>
<li>当你采用了无分号的代码风格的时候,只需要注意以下情况就不会有下面的问题了<ul>
<li>当一行代码是以<code>(</code> ,<code>[</code> , ` ,开头的时候,则在前面补上一个分号用以避免一些语法解析错误</li>
</ul>
</li>
</ul>
<h2 id="5-初步实现apache功能"><a href="#5-初步实现apache功能" class="headerlink" title="5. 初步实现apache功能"></a>5. 初步实现apache功能</h2><ul>
<li>创建server</li>
<li>监听server的request请求事件,设置请求处理函数<ul>
<li>请求<ul>
<li>处理</li>
</ul>
</li>
<li>响应<ul>
<li>一个请求处理一个一个响应,如果在一个请求的过程中,已经结束了,则不能重复发送响应</li>
<li>没有请求就没有响应</li>
</ul>
</li>
</ul>
</li>
<li>绑定端口号,启动服务</li>
<li>apache服务器软件默认有一个www目录,所有存放在www目录中的资源都可以通过网址来浏览<ul>
<li>127.0.0.1:80/aa.txt</li>
<li>127.0.0.1:80/a.html</li>
<li>127.0.0.1:80/login/login.html</li>
</ul>
</li>
<li>在ecmascript6的`字符串中,使用${}来引用变量</li>
</ul>
<h3 id="5-1-安装模板引擎"><a href="#5-1-安装模板引擎" class="headerlink" title="5.1 安装模板引擎"></a>5.1 安装模板引擎</h3><h4 id="5-1-1安装-art-template"><a href="#5-1-1安装-art-template" class="headerlink" title="5.1.1安装 art-template"></a>5.1.1安装 art-template</h4><ul>
<li>npm install art-template</li>
<li>该命令在哪里执行就会把包下载到哪里,默认会下载到node_modules目录中</li>
<li>node_modules不要改,也不支持改</li>
<li>注意:在浏览器中需要引用lib/template-web.js文件</li>
<li>强调:模板引擎不关心你的字符串内容,只关心自己能认识的模板标记语法</li>
<li>语法被称为mutache语法,八字胡语法</li>
<li>在node中最早就是诞生于服务器领域,后来才发展到了前端<ul>
<li>安装</li>
<li>引包,在需要使用的文件模块中加载</li>
<li>查文档,使用模板引擎的API</li>
</ul>
</li>
<li><code>var template = requrire(&#39;art-template&#39;)</code></li>
<li>install的是什么require中的就是什么</li>
</ul>
<h3 id="5-2-小结"><a href="#5-2-小结" class="headerlink" title="5.2 小结"></a>5.2 小结</h3><h4 id="5-2-1代码风格"><a href="#5-2-1代码风格" class="headerlink" title="5.2.1代码风格"></a>5.2.1代码风格</h4><ul>
<li><a href="http://standardjs.com/" target="_blank" rel="noopener">Javascript Standard Style</a></li>
<li>Airbnb JavaScript Style</li>
<li>服务端渲染和客户端渲染的区别<ul>
<li>客户端渲染不利于SEO搜索阴影优化</li>
<li>服务端渲染是可以被爬虫抓取到的,客户端异步渲染是很难被爬虫抓取到</li>
<li>所以你会发现真正的网站既不是纯异步也不是纯服务端渲染出来的</li>
</ul>
</li>
</ul>
<h3 id="5-3记事本"><a href="#5-3记事本" class="headerlink" title="5.3记事本"></a>5.3记事本</h3><ul>
<li><p>浏览器收到html响应内容之后,就要开始从上到下依次解析,当解析的过程中发现有</p>
<ul>
<li>link</li>
<li>script</li>
<li>img</li>
<li>iframe</li>
<li>video</li>
<li>audio</li>
</ul>
</li>
<li><p>等具有src或者href(link)属性标签(具有外链资源)的时候,浏览器会自动对这些静态资源发起新的请求</p>
</li>
<li><p>我们为了方便的统一处理这些静态资源,所以我们约定把所有的静态资源存放在public目录中</p>
</li>
<li><p>哪些资源能被用户访问,哪些资源不能被用户访问,我现在可以通过代码灵活的控制</p>
</li>
<li><p>注意,在服务器端中,文件路径就不要去写相对路径了,这个时候所有的资源都是通过url标识来获取的.我的服务器开放了/public目录,所有所有请求路径都写成/public/xxx</p>
</li>
<li><p>/在这里就是url根路径的意思,浏览器在真正发请求的时候会自动把</p>
</li>
<li><p>在web开发中,所有URL都以/开头</p>
</li>
<li><p>action就是表单提交的地址,说白了就是请求的url地址</p>
</li>
</ul>
<h4 id="5-3-1-表单提交"><a href="#5-3-1-表单提交" class="headerlink" title="5.3.1 表单提交"></a>5.3.1 表单提交</h4><ul>
<li><code>url.parse(&#39;/pinglun/name=gjlejtio;&#39;,&#39;true&#39;)</code> 可以解析路径,通过query属性来访问用户提交的数据</li>
<li>一次请求对应一次响应,响应结束这次请求也就结束了,再发送响应请求也没用了</li>
<li>在dos窗口直接敲<code>node</code> 回车会进入node环境,使用<code>ctrl+cc</code> (连续两次c)退出环境</li>
<li>网站运营 SEO</li>
<li>IE8不支持forEach方法</li>
<li>用到的方法</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//1.url.parse()</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> url = <span class="built_in">require</span>(<span class="string">'url'</span>)</span><br><span class="line"><span class="keyword">var</span> parseObj = url.parse(req.url)</span><br><span class="line"><span class="built_in">console</span>.log(parseObj)</span><br><span class="line"><span class="comment">/************************************************</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">Url &#123;</span></span><br><span class="line"><span class="comment">  protocol: null,</span></span><br><span class="line"><span class="comment">  slashes: null,</span></span><br><span class="line"><span class="comment">  auth: null,</span></span><br><span class="line"><span class="comment">  host: null,</span></span><br><span class="line"><span class="comment">  port: null,</span></span><br><span class="line"><span class="comment">  hostname: null,</span></span><br><span class="line"><span class="comment">  hash: null,</span></span><br><span class="line"><span class="comment">  search: '?name=elaine&amp;message=woxihuancaizhaoyang',</span></span><br><span class="line"><span class="comment">  query: 'name=elaine&amp;message=woxihuancaizhaoyang',</span></span><br><span class="line"><span class="comment">  pathname: '/pinglun',</span></span><br><span class="line"><span class="comment">  path: '/pinglun?name=elaine&amp;message=woxihuancaizhaoyang',</span></span><br><span class="line"><span class="comment">  href: '/pinglun?name=elaine&amp;message=woxihuancaizhaoyang' &#125;</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">************************************************/</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> parseObjTruee = url.parse(req.url,ture)</span><br><span class="line"><span class="built_in">console</span>.log(parseObjTrue)</span><br><span class="line"><span class="comment">//第二个参数为true表示将查询字符串转换为一个对象(通过query属性来访问,以下是返回值</span></span><br><span class="line"></span><br><span class="line"><span class="comment">/************************************************</span></span><br><span class="line"><span class="comment">Url &#123;</span></span><br><span class="line"><span class="comment">  protocol: null,</span></span><br><span class="line"><span class="comment">  slashes: null,</span></span><br><span class="line"><span class="comment">  auth: null,</span></span><br><span class="line"><span class="comment">  host: null,</span></span><br><span class="line"><span class="comment">  port: null,</span></span><br><span class="line"><span class="comment">  hostname: null,</span></span><br><span class="line"><span class="comment">  hash: null,</span></span><br><span class="line"><span class="comment">  search: '?name=elaine&amp;message=woxihuancaizhaoyang',</span></span><br><span class="line"><span class="comment">  query:</span></span><br><span class="line"><span class="comment">   [Object: null prototype] &#123; name: 'elaine', message: 'woxihuancaizhaoyang' &#125;,</span></span><br><span class="line"><span class="comment">  pathname: '/pinglun',</span></span><br><span class="line"><span class="comment">  path: '/pinglun?name=elaine&amp;message=woxihuancaizhaoyang',</span></span><br><span class="line"><span class="comment">  href: '/pinglun?name=elaine&amp;message=woxihuancaizhaoyang' &#125;</span></span><br><span class="line"><span class="comment">  </span></span><br><span class="line"><span class="comment">*********************************************/</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//2.$('div').each()</span></span><br><span class="line"></span><br><span class="line">$(<span class="string">'div'</span>).each(<span class="function"><span class="keyword">function</span>(<span class="params">index,item</span>)</span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(item)</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">//伪数组是对象,对象的原型链中没有forEach()</span></span><br><span class="line"><span class="comment">//forEach语法:['a','b','c'].forEach(function(item,index))</span></span><br><span class="line"><span class="comment">//这个each是jquery提供的,它在jquery的原型链中</span></span><br><span class="line"><span class="comment">//each():</span></span><br><span class="line"><span class="comment">//	1.方便遍历Jquery元素</span></span><br><span class="line"><span class="comment">//	2.可以在不兼容forEach的低版本浏览器中使用jquery的低版本(3以上不支持IE8)</span></span><br><span class="line"><span class="comment">//;[].slice.call($('div')).forEach(function(item,index)&#123;&#125;)</span></span><br><span class="line"><span class="comment">//网页中所有路径都是url路径,不是文件路径</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//3.art.template语法</span></span><br><span class="line"><span class="keyword">var</span> template = <span class="built_in">require</span>(<span class="string">'art-template'</span>)</span><br><span class="line"><span class="keyword">var</span> htmlStr = template.render(data.toString(),&#123;</span><br><span class="line">    comments:comments;</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line"><span class="comment">/*********************************************</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment"> &lt;ul class="list-group"&gt;</span></span><br><span class="line"><span class="comment">      &#123;&#123;each comments&#125;&#125;</span></span><br><span class="line"><span class="comment">      &lt;li class ='list-group-item'&gt;&#123;&#123;$value.name&#125;&#125;说:&#123;&#123;$value.message&#125;&#125;&lt;span class="pull-right"&gt;&#123;&#123;$value.dateTime&#125;&#125;&lt;/span&gt;&lt;/li&gt;</span></span><br><span class="line"><span class="comment">      &#123;&#123;/each&#125;&#125;</span></span><br><span class="line"><span class="comment">    &lt;/ul&gt;</span></span><br><span class="line"><span class="comment">    </span></span><br><span class="line"><span class="comment">*********************************************/</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//4.表单提交重定向</span></span><br><span class="line"></span><br><span class="line">res.statusCode = <span class="number">302</span></span><br><span class="line">res.setHeader(<span class="string">'Location'</span>,<span class="string">'/'</span>)</span><br><span class="line">res.end()</span><br><span class="line"><span class="comment">//301永久重定向  浏览器会记住</span></span><br><span class="line"><span class="comment">//a.com  b.com</span></span><br><span class="line"><span class="comment">//下次浏览器就不会请求a了,直接跳到b了</span></span><br><span class="line"><span class="comment">//302临时重定向  浏览器不记忆(www.sina.com)</span></span><br><span class="line"><span class="comment">//a.com  b.com</span></span><br><span class="line"><span class="comment">//下次浏览器还会请求a</span></span><br><span class="line"><span class="comment">//  a.状态码设置302临时重定向</span></span><br><span class="line"><span class="comment">//		statusCode = 302</span></span><br><span class="line"><span class="comment">//	b.在响应头中用Location告诉客户端往哪里重定向</span></span><br><span class="line"><span class="comment">//		setHeader('Location','/')</span></span><br><span class="line"><span class="comment">//如果客户端发现收到服务器响应的状态码是302,就会自动去找Location</span></span><br></pre></td></tr></table></figure>

<h2 id="6-node中的模块系统"><a href="#6-node中的模块系统" class="headerlink" title="6.node中的模块系统"></a>6.node中的模块系统</h2><p>使用node编写应用程序主要就是在使用</p>
<ul>
<li>EcmaScript语言<ul>
<li>和浏览器不一样,在node中没有BOM,DOM</li>
</ul>
</li>
<li>核心模块<ul>
<li>fs</li>
<li>http</li>
<li>url</li>
<li>path</li>
<li>os</li>
</ul>
</li>
<li>第三方模块<ul>
<li>必须通过npm下载才能使用</li>
</ul>
</li>
<li>自己写的模块<ul>
<li>自己创建的文件</li>
</ul>
</li>
</ul>
<h3 id="6-1-什么是模块化"><a href="#6-1-什么是模块化" class="headerlink" title="6.1 什么是模块化"></a>6.1 什么是模块化</h3><ul>
<li>文件作用域</li>
<li>通信规则<ul>
<li>加载require</li>
<li>导出</li>
</ul>
</li>
</ul>
<h3 id="6-2-CommomJS规范"><a href="#6-2-CommomJS规范" class="headerlink" title="6.2 CommomJS规范"></a>6.2 CommomJS规范</h3><ul>
<li>在node 中的javascript中还有一个很重要的概念:模块系统<ul>
<li>模块作用域</li>
<li>使用require方法来加载模块</li>
<li>使用exports接口对象来暴露</li>
</ul>
</li>
<li>如果一个模块需要直接导出某个成员,而非对象,那这个时候必须使用这种语法:<ul>
<li>module.exports = add</li>
</ul>
</li>
</ul>
<h4 id="6-2-1-加载require"><a href="#6-2-1-加载require" class="headerlink" title="6.2.1 加载require"></a>6.2.1 加载require</h4><ul>
<li>语法: <code>var 自定义变量名称 = require(&#39;模块&#39;)</code> </li>
<li>两个作用<ul>
<li>执行被加载模块中的代码</li>
<li>得到被加载模块中的exports导出的接口对象</li>
</ul>
</li>
</ul>
<h4 id="6-2-2-导出exports"><a href="#6-2-2-导出exports" class="headerlink" title="6.2.2 导出exports"></a>6.2.2 导出exports</h4><ul>
<li>node是模块作用域,默认文件中所有的成员只能在当前文件模块中幼小</li>
<li>对于希望可以被其他模块访问的成员,我们就需要把这些公开的成员挂载到exports对象中<ul>
<li>导出多个对象(必须在对象中)</li>
<li>导出单个成员(拿到的就是函数,字符串)</li>
</ul>
</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//exports是一个引用module.exports的对象</span></span><br><span class="line">exports.a = <span class="number">123</span></span><br><span class="line">exports.b = <span class="string">'hello'</span></span><br><span class="line">exports.d=&#123;</span><br><span class="line">    foo:<span class="string">'bar'</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//导出单个成员必须使用这种方式</span></span><br><span class="line"><span class="built_in">module</span>.exports = <span class="string">'hello'</span></span><br><span class="line"><span class="built_in">module</span>.exports = <span class="function"><span class="keyword">function</span>(<span class="params">x,y</span>)</span>&#123;</span><br><span class="line">    <span class="keyword">return</span> x + y</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//后面的exports 会覆盖前面的</span></span><br><span class="line"><span class="comment">//原理:</span></span><br><span class="line"><span class="comment">//每个模块最后都有一句return module.exports</span></span><br><span class="line"><span class="comment">//而exports = module.exports</span></span><br><span class="line"><span class="comment">//如果将exports赋值了某个变量值,相当于exports不再指向modele.exports,但模块最后返回的是module.exports,所以如果只是想返回某个成员变量,必须使用module.exports</span></span><br></pre></td></tr></table></figure>

<ul>
<li>在node中,每个模块内部都有一个自己的module对象</li>
<li>该module对象中有一个成员叫exports,是一个空对象</li>
<li>默认代码最后有一句 <code>return module.exports</code></li>
<li>也就是说如果你需要对外导出某个成员,只需要把导出的成员挂载到module对象上</li>
<li>我们发现,每次导出接口对象的时候都通过module.exports.xxx太麻烦</li>
<li>node为了简化你的操作,专门概统了exports = module.exports</li>
</ul>
<h4 id="6-2-3-require加载规则"><a href="#6-2-3-require加载规则" class="headerlink" title="6.2.3 require加载规则"></a>6.2.3 require加载规则</h4><ul>
<li><p>优先从缓存加载</p>
</li>
<li><p>判断模块标识符</p>
<ul>
<li>路径形式的模块有以下几种情况<ul>
<li>./ 当前目录 ,不可省略</li>
<li>../  上一级目录,不可省略,.js可省略</li>
<li>/xxx  首位的/在这里表示的是当前文件模块所属磁盘根路径</li>
</ul>
</li>
<li>核心模块<ul>
<li>核心模块本质也是文件</li>
<li>核心模块文件已经被编译到了二进制文件中了,我们只需要按照名字加载就可以了</li>
</ul>
</li>
<li>第三方模块<ul>
<li>如果加载自己写的模块,路径里的./不能省略</li>
<li>不可能有任何一个第三方包和核心模块的名字是一样的</li>
<li>加载规则如下:</li>
<li>node_modules/art-template/package.json中的main属性</li>
<li>如果以上目录都没找到,则会默认加载art-template/index.js</li>
<li>如果以上条件都不成立,则往上一级目录寻找,直到找到根目录</li>
<li>实际上最终加载的还是文件</li>
</ul>
</li>
</ul>
</li>
<li><p>我们项目有且只有一个node_modules,放在项目根目录中,这样项目的所有子目录都可以加载到第三方包</p>
</li>
<li><p>模块查找机制</p>
<ul>
<li><p>优先从缓存加载</p>
</li>
<li><p>核心模块</p>
</li>
<li><p>路径形式的文件模块</p>
</li>
<li><p>第三方模块</p>
<ul>
<li>node_modules/art-template</li>
<li>node_modules/art-template/package.json main:’index.js’</li>
</ul>
</li>
<li><p>深入浅出node.js</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">blog</span><br><span class="line">	a</span><br><span class="line">    	node_modules</span><br><span class="line">        	art-template</span><br><span class="line">		foo.js</span><br><span class="line">	b</span><br><span class="line">    	<span class="built_in">require</span>(<span class="string">'../a/foo.js'</span>)</span><br><span class="line"><span class="comment">//这种情况下b不能require到art-template包,只会根据目录一层一层往外找</span></span><br></pre></td></tr></table></figure>

</li>
</ul>
</li>
</ul>
<h3 id="6-3-package-json"><a href="#6-3-package-json" class="headerlink" title="6.3 package.json"></a>6.3 package.json</h3><ul>
<li>我们建议每一个项目都要有一个<code>package.json</code> 文件(包描述文件)<ul>
<li>npm install –save art-template</li>
<li><code>npm init</code> 可以初始化这个文件</li>
<li>对我们目前来讲,最有用的是<code>dependencies</code> 属性</li>
</ul>
</li>
<li>建议执行 <code>npm install</code> 的时候都加上<code>--save</code> ,则会有dependencies</li>
<li>如果不小心删除node_modules,但package.json还在,可以使用<code>npm install</code> 命令,就会将dependencies中的所有依赖项下回来</li>
</ul>
<h3 id="6-4-npm"><a href="#6-4-npm" class="headerlink" title="6.4 npm"></a>6.4 npm</h3><blockquote>
<p><a href="http://www.npmjs.com" target="_blank" rel="noopener">www.npmjs.com</a></p>
</blockquote>
<ul>
<li>查看当前版本<code>npm --version</code> </li>
<li>升级npm <code>npm install --global npm</code> </li>
<li>常用命令<ul>
<li>npm init<ul>
<li>npm init -y 可以跳过向导,快速生成</li>
</ul>
</li>
<li>npm install<ul>
<li>一次性把dependencies选项中的依赖项全部安装</li>
<li>npm i</li>
</ul>
</li>
<li>npm install –save<ul>
<li>下载并且保存依赖项(package.json文件中的dependencies选项)</li>
<li>npm i -S 包名</li>
</ul>
</li>
<li>npm uninstall 包名<ul>
<li>只删除,如果有依赖项会依然保存</li>
<li>npm um 包名</li>
</ul>
</li>
<li>npm uninstall –save 包名<ul>
<li>删除的同时会把依赖信息去除</li>
<li>npm um -S 包名</li>
</ul>
</li>
<li>npm –help<ul>
<li>查看使用帮助</li>
</ul>
</li>
<li>npm 命令 –help<ul>
<li>查看指定命令的使用帮助</li>
<li>例如我忘记了uninstall命令的简写了. npm uninstall –help</li>
</ul>
</li>
</ul>
</li>
<li>解决npm被墙问题<ul>
<li>npm存储包文件的服务器在国外,有时会被墙,速度很慢</li>
<li>安装淘宝的cnpm</li>
</ul>
</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">npm install cnpm</span><br><span class="line"><span class="comment">//安装成功之后可使用cnpm命令</span></span><br><span class="line">cnpm install jquery</span><br><span class="line"><span class="comment">//如果不想下载淘宝的cnpm,可以用下面的命令</span></span><br><span class="line">npm install -g cnpm --registry=https:<span class="comment">//registry.npm.taobao.org</span></span><br><span class="line"><span class="comment">//但是每一次手动这样加参数很麻烦,所以我们可以把这个选项加入配置文件中</span></span><br><span class="line"><span class="comment">//查看npm配置信息</span></span><br><span class="line">npm config list</span><br></pre></td></tr></table></figure>

<h2 id="7-Express"><a href="#7-Express" class="headerlink" title="7.Express"></a>7.Express</h2><h3 id="7-1-文件路径问题"><a href="#7-1-文件路径问题" class="headerlink" title="7.1 文件路径问题"></a>7.1 文件路径问题</h3><ul>
<li><p><strong>在文件的相对路径中</strong></p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">在文件的相对路径中</span><br><span class="line"><span class="comment">//   ./data/foo.js  相对于当前目录</span></span><br><span class="line"><span class="comment">//   data/foo.js  相对于当前目录</span></span><br><span class="line"><span class="comment">//   /data/foo.js  绝对路径,当前文件模块所处磁盘根目录</span></span><br><span class="line"><span class="comment">//	c://xx/xx/...  绝对路径</span></span><br></pre></td></tr></table></figure>
</li>
<li><p><strong>模块操作路径</strong></p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//这里省略了,也是磁盘根目录</span></span><br><span class="line"><span class="built_in">require</span>(<span class="string">'/data/foo.js'</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment">//相对路径</span></span><br><span class="line"><span class="built_in">require</span>(<span class="string">'./data/foo.js'</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment">//模块加载的路径中的相对路径不能省略./</span></span><br></pre></td></tr></table></figure>

</li>
</ul>
<h3 id="7-2起步"><a href="#7-2起步" class="headerlink" title="7.2起步"></a>7.2起步</h3><ul>
<li><p><code>npm install express --save</code></p>
</li>
<li><p>修改完代码自动重启,在任意目录执行该命令都可以</p>
</li>
<li><p>–global表示在全局中装</p>
<ul>
<li><p><code>npm install --global nodemon</code></p>
<p>安装后使用</p>
</li>
<li><p><code>nodemon app.js</code></p>
</li>
</ul>
</li>
<li><p>app.js 入口模块职责</p>
<ul>
<li>创建服务</li>
<li>做一些服务相关配置<ul>
<li>模板引擎</li>
<li>body-parser解析表单post请求体</li>
<li>提供静态资源服务</li>
</ul>
</li>
<li>挂载路由</li>
<li>监听端口启动服务</li>
</ul>
</li>
</ul>
<h3 id="7-3-路由"><a href="#7-3-路由" class="headerlink" title="7.3 路由"></a>7.3 路由</h3><ul>
<li><p>路由其实就是一张表,这个表里面有具体的映射关系</p>
</li>
<li><p>路由:</p>
<ul>
<li>请求方法</li>
<li>请求路径</li>
<li>请求处理函数</li>
</ul>
</li>
<li><p>路由职责:</p>
<ul>
<li>根据不同国的请求方法和请求路径设置具体的请求处理函数</li>
</ul>
</li>
<li><p>路由设计</p>
<ul>
<li><table>
<thead>
<tr>
<th>请求方法</th>
<th>请求路径</th>
<th>get参数</th>
<th>post参数</th>
<th>备注</th>
</tr>
</thead>
<tbody><tr>
<td>get</td>
<td>/students</td>
<td></td>
<td></td>
<td>渲染首页</td>
</tr>
<tr>
<td>get</td>
<td>/students/new</td>
<td></td>
<td></td>
<td>渲染添加学生页面</td>
</tr>
<tr>
<td>post</td>
<td>/students/new</td>
<td></td>
<td>name,age,gender,hobbies</td>
<td>处理添加请求</td>
</tr>
<tr>
<td>get</td>
<td>/students/edit</td>
<td>id</td>
<td></td>
<td>渲染编辑页面</td>
</tr>
<tr>
<td>post</td>
<td>/students/edit</td>
<td></td>
<td>id,age,gender,hobbies</td>
<td>处理编辑请求</td>
</tr>
<tr>
<td>get</td>
<td>/students/delete</td>
<td>id</td>
<td></td>
<td>处理删除请求并渲染页面</td>
</tr>
</tbody></table>
</li>
</ul>
</li>
<li><p>使用方法</p>
</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//express提供给了一个方式专门包装路由</span></span><br><span class="line"><span class="keyword">var</span> express = <span class="built_in">require</span>(<span class="string">'express'</span>)</span><br><span class="line"><span class="comment">//1.创建一个路由容器</span></span><br><span class="line"><span class="keyword">var</span> router = express.Router()</span><br><span class="line"></span><br><span class="line"><span class="comment">//2.把路由挂载到路由容器中</span></span><br><span class="line">router.get(<span class="string">'/students'</span>,<span class="function"><span class="keyword">function</span>(<span class="params">req,res</span>)</span>&#123;</span><br><span class="line">    </span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line"><span class="comment">//3.在app.js文件中使用路由</span></span><br><span class="line">app.user(router)</span><br></pre></td></tr></table></figure>

<h3 id="7-4-配置art-template"><a href="#7-4-配置art-template" class="headerlink" title="7.4 配置art-template"></a>7.4 配置art-template</h3><p>安装</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">npm install --save art-template</span><br><span class="line">npm install --save express-art-template</span><br></pre></td></tr></table></figure>

<p>配置</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">app.engine(<span class="string">'art'</span>,<span class="built_in">require</span>(<span class="string">'express-art-template'</span>))</span><br><span class="line"><span class="comment">//第一个参数,表示当渲染以.art结尾的文件的时候,使用art-template模板引擎</span></span><br><span class="line"><span class="comment">//虽然这里不需要加载art-template,但是也必须安装</span></span><br><span class="line"><span class="comment">//因为express-art-template依赖了art-template包</span></span><br></pre></td></tr></table></figure>

<p>使用</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//express为response对象提供给了一个方法:render</span></span><br><span class="line"><span class="comment">//render方法默认是不可以使用,但是如果配置了模板引擎就可以使用</span></span><br><span class="line"><span class="comment">//res.render('html模板名',&#123;模板数据&#125;)</span></span><br><span class="line"><span class="comment">//第一个参数不能写路径,默认会去项目中的views目录查找该模板文件</span></span><br><span class="line"><span class="comment">//也就是说express有一个约定,开发人员吧把所有的视图文件都放在views目录中</span></span><br><span class="line"><span class="comment">//如果想要修改默认的views目录,则可以</span></span><br><span class="line">app.set(<span class="string">'views'</span>,render函数的默认路径)</span><br></pre></td></tr></table></figure>

<h3 id="7-5-在express获取表单post请求体数据"><a href="#7-5-在express获取表单post请求体数据" class="headerlink" title="7.5 在express获取表单post请求体数据"></a>7.5 在express获取表单post请求体数据</h3><p>在express中没有内置获取表单post请求体的api</p>
<p>下载body-parser中间件(专门用来解析post请求)</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install body-parser</span><br></pre></td></tr></table></figure>

<p>安装</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> express = <span class="built_in">require</span>(<span class="string">'express'</span>)</span><br><span class="line"><span class="comment">//0.引包</span></span><br><span class="line"><span class="keyword">var</span> bodyParser = <span class="built_in">require</span>(<span class="string">'body-parser'</span>)</span><br><span class="line"><span class="keyword">var</span> app = express()</span><br><span class="line"><span class="comment">//1.配置body-parser</span></span><br><span class="line"><span class="comment">//只要加入这个配置,则在req请求对象上会多出啦一个属性body</span></span><br><span class="line"><span class="comment">//也就是说你就可以通过req.body来获取表单post请求数据了</span></span><br><span class="line"><span class="comment">//parse.application/x-www-form-unencoded</span></span><br><span class="line">app.use(bodyParser.urlencoded(&#123;<span class="attr">extended</span>:<span class="literal">false</span>&#125;))</span><br><span class="line"><span class="comment">// parse application/json</span></span><br><span class="line">app.use(bodyParser.json())</span><br><span class="line"><span class="comment">//使用body-parser</span></span><br><span class="line">app.use(<span class="function"><span class="keyword">function</span> (<span class="params">req, res</span>) </span>&#123;</span><br><span class="line">  res.setHeader(<span class="string">'Content-Type'</span>, <span class="string">'text/plain'</span>)</span><br><span class="line">  res.write(<span class="string">'you posted:\n'</span>)</span><br><span class="line">  res.end(<span class="built_in">JSON</span>.stringify(req.body, <span class="literal">null</span>, <span class="number">2</span>))</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>

<p>安装bootstrap</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">npm uninstall bootstrap</span><br><span class="line">npm install --save bootstrap@3.3.7</span><br><span class="line">//或者将package.json里面bootstrap修改为3.3.7然后保存,删除目录下的module文件,重新npm install</span><br></pre></td></tr></table></figure>

<ul>
<li>从文件中得到的数据一定是字符串,所以一定要手动转换为对象</li>
<li>Express<ul>
<li>art-template模板引擎的配置</li>
<li>body-parser解析表单POST,请求体</li>
</ul>
</li>
<li>技术只是一种解决问题的手段,工具而已<ul>
<li>第三方的东西,不要纠结</li>
<li>先以解决问题为主</li>
</ul>
</li>
<li>详解了express.static静态服务API<ul>
<li>`app.use(‘/public/‘,static(‘./public/‘))</li>
</ul>
</li>
</ul>
<h3 id="7-6-设计操作数据的api文件模块"><a href="#7-6-设计操作数据的api文件模块" class="headerlink" title="7.6 设计操作数据的api文件模块"></a>7.6 设计操作数据的api文件模块</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * student.js</span></span><br><span class="line"><span class="comment"> * 数据操作文件模块</span></span><br><span class="line"><span class="comment"> * 职责:操作文件中国的数据只处理数据,不关心业务</span></span><br><span class="line"><span class="comment"> * </span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"> <span class="comment">/**</span></span><br><span class="line"><span class="comment">  * 获取所有学生列表</span></span><br><span class="line"><span class="comment">  */</span></span><br><span class="line"> exports.find = <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line"></span><br><span class="line"> &#125;</span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> *添加保存学生</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"> exports.save = <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line"></span><br><span class="line"> &#125;</span><br><span class="line"></span><br><span class="line"> <span class="comment">/**</span></span><br><span class="line"><span class="comment">  * 更新学生</span></span><br><span class="line"><span class="comment">  */</span></span><br><span class="line"> exports.update = <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line"></span><br><span class="line"> &#125;</span><br><span class="line"></span><br><span class="line"> <span class="comment">/**</span></span><br><span class="line"><span class="comment">  * 删除学生</span></span><br><span class="line"><span class="comment">  */</span></span><br><span class="line"> exports.delete = <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line"></span><br><span class="line"> &#125;</span><br></pre></td></tr></table></figure>

<h3 id="7-7-封装异步API"><a href="#7-7-封装异步API" class="headerlink" title="7.7 封装异步API"></a>7.7 封装异步API</h3><ul>
<li>如果需要获取一个函数中异步操作的结果,则必须通过回调函数来获取</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">fn</span>(<span class="params">callback</span>)</span>&#123;</span><br><span class="line">    setTimeout(<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">        <span class="keyword">var</span> data = <span class="string">"hello"</span></span><br><span class="line">        callback(data)</span><br><span class="line">    &#125;,<span class="number">2000</span>)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">fn(<span class="function"><span class="keyword">function</span>(<span class="params">data</span>)</span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(data)</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>

<h2 id="8-异步编程"><a href="#8-异步编程" class="headerlink" title="8 异步编程"></a>8 异步编程</h2><h3 id="8-1-回调函数"><a href="#8-1-回调函数" class="headerlink" title="8.1 回调函数"></a>8.1 回调函数</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">add</span>(<span class="params">x,y</span>)</span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="number">1</span>)</span><br><span class="line">    setTimeout(<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">        <span class="built_in">console</span>.log(<span class="number">2</span>)</span><br><span class="line">        <span class="keyword">return</span> x+y</span><br><span class="line">    &#125;,<span class="number">1000</span>)</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="number">3</span>)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="built_in">console</span>.log(add(<span class="number">10</span>,<span class="number">20</span>))</span><br><span class="line"><span class="comment">//1</span></span><br><span class="line"><span class="comment">//3</span></span><br><span class="line"><span class="comment">//2</span></span><br></pre></td></tr></table></figure>

<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">add</span>(<span class="params">x,y</span>)</span>&#123;</span><br><span class="line">    <span class="keyword">var</span> ret</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="number">1</span>)</span><br><span class="line">    setTimeout(<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">        <span class="built_in">console</span>.log(<span class="number">2</span>)</span><br><span class="line">        ret = x+y</span><br><span class="line">    &#125;,<span class="number">1000</span>)</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="number">3</span>)</span><br><span class="line">    <span class="keyword">return</span> ret</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="built_in">console</span>.log(add(<span class="number">10</span>,<span class="number">20</span>))</span><br><span class="line"><span class="comment">//1</span></span><br><span class="line"><span class="comment">//3</span></span><br><span class="line"><span class="comment">//undefined</span></span><br><span class="line"><span class="comment">//2</span></span><br></pre></td></tr></table></figure>

<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="function">function <span class="title">add</span><span class="params">(x,y,callback)</span></span>&#123;</span><br><span class="line">    console.log(<span class="number">1</span>)</span><br><span class="line">    setTimeout(function()&#123;</span><br><span class="line">        <span class="keyword">var</span> ret = x + y</span><br><span class="line">        callback(ret)</span><br><span class="line">    &#125;,<span class="number">1000</span>)</span><br><span class="line">&#125;</span><br><span class="line">add(<span class="number">10</span>,<span class="number">20</span>,function(ret)&#123;</span><br><span class="line">    console.log(ret)</span><br><span class="line">&#125;)</span><br><span class="line"><span class="comment">//理解的重点在于:</span></span><br><span class="line"><span class="comment">//如果想从一个异步函数中拿到返回值,必须要确保异步函数已经执行了</span></span><br><span class="line"><span class="comment">//因为异步函数会在普通代码执行完执行</span></span><br></pre></td></tr></table></figure>

<ul>
<li>setInterveal是window对象?</li>
</ul>
<h2 id="9-mongodb"><a href="#9-mongodb" class="headerlink" title="9. mongodb"></a>9. mongodb</h2><h3 id="9-1-开启mongod"><a href="#9-1-开启mongod" class="headerlink" title="9.1 开启mongod"></a>9.1 开启mongod</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span>mongodb 默认使用执行Mongod命令所处盼复根目录下的/data/db作为自己的数据存储目录</span><br><span class="line"><span class="meta">#</span>所以第一个执行该命令之前先自己手动新建一个/data/db</span><br><span class="line">mongod</span><br></pre></td></tr></table></figure>

<p>如果 想要修改默认的数据存储目录,可以:</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">mongod --dbpath-数据存储目录路径</span><br><span class="line"><span class="meta">#</span>停止</span><br><span class="line">在开启服务的控制塔,直接ctrl+c即可停止</span><br></pre></td></tr></table></figure>

<h3 id="9-2-连接数据库"><a href="#9-2-连接数据库" class="headerlink" title="9.2 连接数据库"></a>9.2 连接数据库</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span> 该命令默认连接本机的MongoDB服务</span><br><span class="line">Mongo</span><br><span class="line"><span class="meta">#</span> 退出</span><br><span class="line">exit</span><br></pre></td></tr></table></figure>

<h3 id="9-3-基本命令"><a href="#9-3-基本命令" class="headerlink" title="9.3 基本命令"></a>9.3 基本命令</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">show dbs</span><br><span class="line"><span class="meta">#</span>查看显示所有数据库</span><br><span class="line"></span><br><span class="line">use 数据库名称</span><br><span class="line"><span class="meta">#</span>切换到指定的数据库(如果没有会新建)</span><br><span class="line"></span><br><span class="line">db</span><br><span class="line"><span class="meta">#</span>查看当前操作的数据库</span><br><span class="line"></span><br><span class="line">show collections</span><br><span class="line"><span class="meta">#</span>显示集合</span><br><span class="line"></span><br><span class="line">db.cats.find()</span><br></pre></td></tr></table></figure>

<h3 id="9-4-在node中如何操作mongodb数据"><a href="#9-4-在node中如何操作mongodb数据" class="headerlink" title="9.4 在node中如何操作mongodb数据"></a>9.4 在node中如何操作mongodb数据</h3><h4 id="9-4-1-使用mongoose来操作"><a href="#9-4-1-使用mongoose来操作" class="headerlink" title="9.4.1 使用mongoose来操作"></a>9.4.1 使用mongoose来操作</h4><h2 id="10-回调地狱"><a href="#10-回调地狱" class="headerlink" title="10.回调地狱"></a>10.回调地狱</h2><ul>
<li>抛出异常:1.阻止程序的执行;2.把错误消息打印到控制台</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> fs = <span class="built_in">require</span>(<span class="string">'fs'</span>)</span><br><span class="line"></span><br><span class="line">fs.readFile(<span class="string">'./data/a.txt'</span>,<span class="string">'utf8'</span>,<span class="function"><span class="keyword">function</span>(<span class="params">err,ret</span>)</span>&#123;</span><br><span class="line">    <span class="keyword">if</span>(err)<span class="keyword">throw</span> err</span><br><span class="line">    <span class="built_in">console</span>.log(ret)</span><br><span class="line"></span><br><span class="line">    fs.readFile(<span class="string">'./data/b.txt'</span>,<span class="string">'utf8'</span>,<span class="function"><span class="keyword">function</span>(<span class="params">err,ret</span>)</span>&#123;</span><br><span class="line">        <span class="keyword">if</span>(err)<span class="keyword">throw</span> err</span><br><span class="line">        <span class="built_in">console</span>.log(ret)</span><br><span class="line">        fs.readFile(<span class="string">'./data/c.txt'</span>,<span class="string">'utf8'</span>,<span class="function"><span class="keyword">function</span>(<span class="params">err,ret</span>)</span>&#123;</span><br><span class="line">            <span class="keyword">if</span>(err)<span class="keyword">throw</span> err</span><br><span class="line">            <span class="built_in">console</span>.log(ret)</span><br><span class="line">        &#125;)</span><br><span class="line">    &#125;)</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>

<p>为了解决以上编码方式带来的问题,所以再ecmascript6中新增了</p>
<ul>
<li>promise是一个容器,容器中存放了一个异步任务<ul>
<li>pending:即将发生的,状态只能变成下面的一种<ul>
<li>若成功 resolved,(fulfilled)</li>
<li>若失败 rejected</li>
</ul>
</li>
</ul>
</li>
<li>在ecmascript中新增了一个api promise.promise是一个 构造函数</li>
<li>promise一旦创建,就开始执行里面的代码</li>
<li>promise本身不是异步,但里面的任务往往是异步</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> fs = <span class="built_in">require</span>(<span class="string">'fs'</span>)</span><br><span class="line"></span><br><span class="line"><span class="built_in">console</span>.log(<span class="number">1</span>)</span><br><span class="line"><span class="keyword">var</span> p1 = <span class="keyword">new</span> <span class="built_in">Promise</span>(<span class="function"><span class="keyword">function</span>(<span class="params">resolve,reject</span>)</span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="number">2</span>)</span><br><span class="line">    fs.readFile(<span class="string">'./data/a.txt'</span>,<span class="string">'utf8'</span>,<span class="function"><span class="keyword">function</span>(<span class="params">err,ret</span>)</span>&#123;</span><br><span class="line">        <span class="keyword">if</span>(err)&#123;</span><br><span class="line">            reject(err)</span><br><span class="line">        &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">            <span class="built_in">console</span>.log(<span class="number">3</span>)</span><br><span class="line">            <span class="built_in">console</span>.log(ret)</span><br><span class="line">            resolve(ret)</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;)</span><br><span class="line">&#125;)</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="number">4</span>)  </span><br><span class="line"><span class="comment">//then方法接收的参数data就是resolve里的ret</span></span><br><span class="line"><span class="comment">//  第二个参数err就是reject的err</span></span><br><span class="line"></span><br><span class="line">  p1.then(<span class="function"><span class="keyword">function</span>(<span class="params">data</span>)</span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(data)</span><br><span class="line">  &#125;,<span class="function"><span class="keyword">function</span>(<span class="params">err</span>)</span>&#123;</span><br><span class="line">      <span class="built_in">console</span>.log(err)</span><br><span class="line">  &#125;)</span><br></pre></td></tr></table></figure>

<h2 id="11-node中的其他成员"><a href="#11-node中的其他成员" class="headerlink" title="11.node中的其他成员"></a>11.node中的其他成员</h2><ul>
<li><code>__dirname</code> 获取当前文件模块所属目录的绝对路径</li>
<li><code>filename</code> 获取当前文件的绝对路径</li>
<li><code>require</code></li>
<li><code>exports</code></li>
</ul>
<h3 id="11-1路径问题"><a href="#11-1路径问题" class="headerlink" title="11.1路径问题"></a>11.1路径问题</h3><ul>
<li>相对于执行node命令的所属目录</li>
<li>node在哪个目录下执行,就相对于哪个目录</li>
<li>所以在文件操作中,使用相对路径是不可靠的</li>
<li>最好使用<code>__dirname</code>或者<code>__filename</code></li>
<li>注意:模块中的路径标识和这里的路径没关系,不受影响</li>
</ul>

    </div>

    
    
    
        
      

      <footer class="post-footer">
          
            
          
          <div class="post-tags">
            
              <a href="/tags/node/" rel="tag"># node</a>
            
          </div>
        

        

          <div class="post-nav">
            <div class="post-nav-next post-nav-item">
              
                <a href="/2019/08/21/hello-world/" rel="next" title="Hello World">
                  <i class="fa fa-chevron-left"></i> Hello World
                </a>
              
            </div>

            <span class="post-nav-divider"></span>

            <div class="post-nav-prev post-nav-item">
              
            </div>
          </div>
        
      </footer>
    
  </div>
  
  
  
  </article>

  </div>


          </div>
          

        </div>
          
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    <div class="sidebar-inner">
        
        
        
        
      

      <ul class="sidebar-nav">
        <li class="sidebar-nav-toc" data-target="post-toc-wrap">
          Table of Contents
        </li>
        <li class="sidebar-nav-overview" data-target="site-overview-wrap">
          Overview
        </li>
      </ul>

      <!--noindex-->
      <div class="post-toc-wrap sidebar-panel">
          <div class="post-toc">
            <div class="post-toc-content"><ol class="nav"><li class="nav-item nav-level-1"><a class="nav-link" href="#Node-js"><span class="nav-number">1.</span> <span class="nav-text">Node.js</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#1-node-js简介"><span class="nav-number">1.1.</span> <span class="nav-text">1.node.js简介</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#1-1-node-js是什么"><span class="nav-number">1.1.1.</span> <span class="nav-text">1.1. node.js是什么</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#1-2-Node-js能做什么"><span class="nav-number">1.1.2.</span> <span class="nav-text">1.2. Node.js能做什么</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#1-3-预备知识"><span class="nav-number">1.1.3.</span> <span class="nav-text">1.3. 预备知识</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#1-4-一些资源"><span class="nav-number">1.1.4.</span> <span class="nav-text">1.4. 一些资源</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#1-5-这门课程能学到什么"><span class="nav-number">1.1.5.</span> <span class="nav-text">1.5. 这门课程能学到什么</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#2-起步"><span class="nav-number">1.2.</span> <span class="nav-text">2.起步</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#2-1-node环境安装"><span class="nav-number">1.2.1.</span> <span class="nav-text">2.1 node环境安装</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#2-2-hello-world"><span class="nav-number">1.2.2.</span> <span class="nav-text">2.2. hello world</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#3-node中的Javascript"><span class="nav-number">1.3.</span> <span class="nav-text">3. node中的Javascript</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#3-1使用node创建服务器"><span class="nav-number">1.3.1.</span> <span class="nav-text">3.1使用node创建服务器</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#3-2核心模块"><span class="nav-number">1.3.2.</span> <span class="nav-text">3.2核心模块</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#3-3-fs核心模块"><span class="nav-number">1.3.3.</span> <span class="nav-text">3.3 fs核心模块</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#3-3-1读取文件"><span class="nav-number">1.3.3.1.</span> <span class="nav-text">3.3.1读取文件</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#3-3-2打开文件"><span class="nav-number">1.3.3.2.</span> <span class="nav-text">3.3.2打开文件</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#3-3-3删除文件"><span class="nav-number">1.3.3.3.</span> <span class="nav-text">3.3.3删除文件</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#3-3-4写文件"><span class="nav-number">1.3.3.4.</span> <span class="nav-text">3.3.4写文件</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#3-3-5追加文件"><span class="nav-number">1.3.3.5.</span> <span class="nav-text">3.3.5追加文件</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#3-3-6遍历文件"><span class="nav-number">1.3.3.6.</span> <span class="nav-text">3.3.6遍历文件</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#3-4-path核心模块"><span class="nav-number">1.3.4.</span> <span class="nav-text">3.4 path核心模块</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#3-5用户自定义模块"><span class="nav-number">1.3.5.</span> <span class="nav-text">3.5用户自定义模块</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#4-web-服务器开发"><span class="nav-number">1.4.</span> <span class="nav-text">4. web 服务器开发</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#4-1ip地址和端口号"><span class="nav-number">1.4.1.</span> <span class="nav-text">4.1ip地址和端口号</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#4-2-编码问题"><span class="nav-number">1.4.2.</span> <span class="nav-text">4.2 编码问题</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#代码风格问题"><span class="nav-number">1.4.2.1.</span> <span class="nav-text">代码风格问题</span></a></li></ol></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#5-初步实现apache功能"><span class="nav-number">1.5.</span> <span class="nav-text">5. 初步实现apache功能</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#5-1-安装模板引擎"><span class="nav-number">1.5.1.</span> <span class="nav-text">5.1 安装模板引擎</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#5-1-1安装-art-template"><span class="nav-number">1.5.1.1.</span> <span class="nav-text">5.1.1安装 art-template</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#5-2-小结"><span class="nav-number">1.5.2.</span> <span class="nav-text">5.2 小结</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#5-2-1代码风格"><span class="nav-number">1.5.2.1.</span> <span class="nav-text">5.2.1代码风格</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#5-3记事本"><span class="nav-number">1.5.3.</span> <span class="nav-text">5.3记事本</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#5-3-1-表单提交"><span class="nav-number">1.5.3.1.</span> <span class="nav-text">5.3.1 表单提交</span></a></li></ol></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#6-node中的模块系统"><span class="nav-number">1.6.</span> <span class="nav-text">6.node中的模块系统</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#6-1-什么是模块化"><span class="nav-number">1.6.1.</span> <span class="nav-text">6.1 什么是模块化</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#6-2-CommomJS规范"><span class="nav-number">1.6.2.</span> <span class="nav-text">6.2 CommomJS规范</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#6-2-1-加载require"><span class="nav-number">1.6.2.1.</span> <span class="nav-text">6.2.1 加载require</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#6-2-2-导出exports"><span class="nav-number">1.6.2.2.</span> <span class="nav-text">6.2.2 导出exports</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#6-2-3-require加载规则"><span class="nav-number">1.6.2.3.</span> <span class="nav-text">6.2.3 require加载规则</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#6-3-package-json"><span class="nav-number">1.6.3.</span> <span class="nav-text">6.3 package.json</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#6-4-npm"><span class="nav-number">1.6.4.</span> <span class="nav-text">6.4 npm</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#7-Express"><span class="nav-number">1.7.</span> <span class="nav-text">7.Express</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#7-1-文件路径问题"><span class="nav-number">1.7.1.</span> <span class="nav-text">7.1 文件路径问题</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#7-2起步"><span class="nav-number">1.7.2.</span> <span class="nav-text">7.2起步</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#7-3-路由"><span class="nav-number">1.7.3.</span> <span class="nav-text">7.3 路由</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#7-4-配置art-template"><span class="nav-number">1.7.4.</span> <span class="nav-text">7.4 配置art-template</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#7-5-在express获取表单post请求体数据"><span class="nav-number">1.7.5.</span> <span class="nav-text">7.5 在express获取表单post请求体数据</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#7-6-设计操作数据的api文件模块"><span class="nav-number">1.7.6.</span> <span class="nav-text">7.6 设计操作数据的api文件模块</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#7-7-封装异步API"><span class="nav-number">1.7.7.</span> <span class="nav-text">7.7 封装异步API</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#8-异步编程"><span class="nav-number">1.8.</span> <span class="nav-text">8 异步编程</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#8-1-回调函数"><span class="nav-number">1.8.1.</span> <span class="nav-text">8.1 回调函数</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#9-mongodb"><span class="nav-number">1.9.</span> <span class="nav-text">9. mongodb</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#9-1-开启mongod"><span class="nav-number">1.9.1.</span> <span class="nav-text">9.1 开启mongod</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#9-2-连接数据库"><span class="nav-number">1.9.2.</span> <span class="nav-text">9.2 连接数据库</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#9-3-基本命令"><span class="nav-number">1.9.3.</span> <span class="nav-text">9.3 基本命令</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#9-4-在node中如何操作mongodb数据"><span class="nav-number">1.9.4.</span> <span class="nav-text">9.4 在node中如何操作mongodb数据</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#9-4-1-使用mongoose来操作"><span class="nav-number">1.9.4.1.</span> <span class="nav-text">9.4.1 使用mongoose来操作</span></a></li></ol></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#10-回调地狱"><span class="nav-number">1.10.</span> <span class="nav-text">10.回调地狱</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#11-node中的其他成员"><span class="nav-number">1.11.</span> <span class="nav-text">11.node中的其他成员</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#11-1路径问题"><span class="nav-number">1.11.1.</span> <span class="nav-text">11.1路径问题</span></a></li></ol></li></ol></li></ol></div>
          </div>
        
      </div>
      <!--/noindex-->

      <div class="site-overview-wrap sidebar-panel">
        <div class="site-overview">
          <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
  <p class="site-author-name" itemprop="name">elaine</p>
  <div class="site-description motion-element" itemprop="description"></div>
</div>
  <nav class="site-state motion-element">
      <div class="site-state-item site-state-posts">
        
          <a href="/archives/">
        
          <span class="site-state-item-count">2</span>
          <span class="site-state-item-name">posts</span>
        </a>
      </div>
    
      
      
      <div class="site-state-item site-state-tags">
        
        
        
          
        
        <span class="site-state-item-count">1</span>
        <span class="site-state-item-name">tags</span>
        
      </div>
    
  </nav>



        </div>
      </div>

    </div>
  </aside>
  <div id="sidebar-dimmer"></div>


      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <div class="copyright">&copy; <span itemprop="copyrightYear">2019</span>
  <span class="with-love" id="animate">
    <i class="fa fa-user"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">elaine</span>
</div>
  <div class="powered-by">Powered by <a href="https://hexo.io" class="theme-link" rel="noopener" target="_blank">Hexo</a> v3.9.0</div>
  <span class="post-meta-divider">|</span>
  <div class="theme-info">Theme – <a href="https://theme-next.org" class="theme-link" rel="noopener" target="_blank">NexT.Pisces</a> v7.3.0</div>

        












        
      </div>
    </footer>

    
  <div class="back-to-top">
    <i class="fa fa-arrow-up"></i>
    <span>0%</span>
  </div>

  </div>

  
  <script src="/lib/jquery/index.js?v=3.4.1"></script>
  <script src="/lib/velocity/velocity.min.js?v=1.2.1"></script>
  <script src="/lib/velocity/velocity.ui.min.js?v=1.2.1"></script>
<script src="/js/utils.js?v=7.3.0"></script><script src="/js/motion.js?v=7.3.0"></script>
<script src="/js/schemes/pisces.js?v=7.3.0"></script>
<script src="/js/next-boot.js?v=7.3.0"></script>



  





















  

  

  


  
  <script src="/js/post-details.js?v=7.3.0"></script>


</body>
</html>
